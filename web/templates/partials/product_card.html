<div class="card product-card h-100 shadow-sm position-relative">
  <img src="{{ product.image_url or url_for('static', filename='img/default-product.svg') }}" class="card-img-top" alt="{{ product.name }}">
  {% if current_user.is_authenticated and current_user.is_admin and not product.active %}
    <span class="badge bg-secondary position-absolute top-0 start-0 m-2">Désactivé</span>
  {% endif %}
  <div class="card-body d-flex flex-column">
    <h5 class="card-title small fw-bold">{{ product.name }}</h5>
    <p class="card-text text-muted small mb-2">{{ product.description }}</p>
    <div class="mt-auto d-flex align-items-center justify-content-between">
      <div class="fw-bold">{{ "%.2f"|format((product.price_cents or 0) / 100) }} €</div>
      <div>
        {% if product.active %}
          <button class="btn btn-sm btn-outline-primary" hx-post="{{ url_for('cart.add', product_id=product.id) }}" hx-swap="none" hx-trigger="click" hx-on="htmx:afterRequest: showAddedToast()" hx-headers='{"X-CSRFToken": "{{ csrf_token() }}"}'>Ajouter</button>
        {% else %}
          <button class="btn btn-sm btn-outline-secondary" disabled>Désactivé</button>
        {% endif %}
        <a class="btn btn-sm btn-primary" href="{{ url_for('catalog.product_detail', product_id=product.id) }}">Voir</a>
      </div>
    </div>
  </div>
</div>
